sap.ui.define(["sap/ui/core/util/MockServer","sap/ui/thirdparty/jquery"],function(e,jQuery){"use strict";var t,r="com/esweckert/demo-transfer-app/",a=r+"localService/data";function s(e){let t;jQuery.ajax({url:e,async:false,dataType:"json",success(e){t=e}});return t}return{init:function(){var n="/sap/opu/odata/sap/ZMM_PROCESS_MMS_ARTICLE_SRV/";t=new e({rootUri:n});var o=sap.ui.require.toUrl("com/esweckert/demo-transfer-app/localService");var i=jQuery.sap.getUriParameters(),c=jQuery.sap.getModulePath(a),p=jQuery.sap.getModulePath(r+"manifest",".json"),d="",u=i.get("errorType"),l=u==="badRequest"?400:500,f=jQuery.sap.syncGetJSON(p).data,S=f["sap.app"].dataSources,g=S.ZMM_PROCESS_MMS_ARTICLE_SRV,y=jQuery.sap.getModulePath(r+g.settings.localUri.replace(".xml",""),".xml"),m=n,M=g.settings.annotations;e.config({autoRespond:true,autoRespondAfter:1e3});t.simulate(o+"/metadata.xml",{sMockdataBaseUrl:o+"/data",bGenerateMissingMockData:true});const h=s(o+"/response/ODataErrorResponseTemplate.json");const P=s(o+"/response/SAP-Message-Header.json");const R=s(o+"/data/ProductSet.json");const j=t.getRequests();function O(e){const t=[];if(e.subsidary==="SE"){t.push({code:"E:101",message:"Products from Sweden can not be transfered anymore!",propertyref:"",severity:"error",target:"/ProductSet"})}return t}function T(e){e.response=function(e){const t=JSON.parse(e.requestBody);const r=O(t);if(r.length){h.error.innererror.errordetails=r;e.respond(500,{"Content-Type":"application/json"},JSON.stringify(h))}else{R.d.articles=t.articles;R.d.subsidary=t.subsidary;R.d.articleKind=t.articleKind;R.d.legacyProdid=t.legacyProdid;R.d.creatatCheck=t.creatatCheck;R.d.noArticles=t.articles.split(",").length;e.respond(200,{"Content-Type":"application/json","sap-message":JSON.stringify(P)},JSON.stringify(R))}}}function k(e){e.response=function(e){e.respond(200,{"Content-Type":"application/json"},JSON.stringify(R))}}j.forEach(e=>{if(e.method==="GET"&&e.path.toString().includes("ProductSet")){k(e)}else if(e.method==="POST"&&e.path.toString().includes("ProductSet")){T(e)}});t.start();jQuery.sap.log.info("Running the app with mock data")},getMockServer:function(){return t}}});
//# sourceMappingURL=mockserver.js.map